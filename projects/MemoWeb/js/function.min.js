function update(){var allTr=document.getElementsByTagName("tr");for(var i=1;i<allTr.length;i++){allTr[i].children[0].innerHTML=i}}function del(){var tr=this.parentNode.parentNode;var index=tr.children[0].innerHTML;if(confirm("确定删除索引为"+index+"的记录吗?")){tr.parentNode.removeChild(tr);update()}return false}function add(){var input=document.getElementById("inputText");var table=document.getElementById("memoTable");var tr=document.createElement("tr");if(input.value==""){return}tr.innerHTML="<td>"+table.children.length+"</td>"+"<td>"+input.value+"</td>"+"<td>"+'<a href="javascript:;">↑</a>'+"&nbsp;&nbsp;"+'<a href="javascript:;">↓</a>'+"</td>"+"<td>"+'<a href="javascript:;">Delete</a>'+"</td>";tr.getElementsByTagName("a")[0].onclick=up;tr.getElementsByTagName("a")[1].onclick=down;tr.getElementsByTagName("a")[2].onclick=del;table.appendChild(tr);input.value=""}function up(){var tr=this.parentNode.parentNode;var index=tr.children[0].innerHTML;if(parseInt(index)>1){var pre=tr.previousElementsSibling||tr.previousSibling;var temp=tr.innerHTML;tr.innerHTML=pre.innerHTML;pre.innerHTML=temp;tr.getElementsByTagName("a")[0].onclick=up;tr.getElementsByTagName("a")[1].onclick=down;tr.getElementsByTagName("a")[2].onclick=del;pre.getElementsByTagName("a")[0].onclick=up;pre.getElementsByTagName("a")[1].onclick=down;pre.getElementsByTagName("a")[2].onclick=del;update()}}function down(){var tr=this.parentNode.parentNode;var index=tr.children[0].innerHTML;var allTr=document.getElementsByTagName("tr");if(parseInt(index)<allTr.length-1){var next=tr.nextElementsSibling||tr.nextSibling;var temp=tr.innerHTML;tr.innerHTML=next.innerHTML;next.innerHTML=temp;tr.getElementsByTagName("a")[0].onclick=up;tr.getElementsByTagName("a")[1].onclick=down;tr.getElementsByTagName("a")[2].onclick=del;next.getElementsByTagName("a")[0].onclick=up;next.getElementsByTagName("a")[1].onclick=down;next.getElementsByTagName("a")[2].onclick=del;update()}}function onKeyPress(){var keyCode=null;if(event.which){keyCode=event.which}else{if(event.keyCode){keyCode=event.keyCode}}if(keyCode==13){add();return false}return true}function band(){var btn=document.getElementById("addButton");btn.onclick=add;var input=document.getElementById("inputText");input.onkeypress=onKeyPress;window.onbeforeunload=write}function read(){var str=localStorage.getItem("CONTENT");var content=str.split("|$|");var table=document.getElementById("memoTable");if(content==""){return}for(var i=0;i<content.length;i++){var tr=document.createElement("tr");tr.innerHTML="<td>"+table.children.length+"</td>"+"<td>"+content[i]+"</td>"+"<td>"+'<a href="javascript:;">↑</a>'+"&nbsp;&nbsp;"+'<a href="javascript:;">↓</a>'+"</td>"+"<td>"+'<a href="javascript:;">Delete</a>'+"</td>";tr.getElementsByTagName("a")[0].onclick=up;tr.getElementsByTagName("a")[1].onclick=down;tr.getElementsByTagName("a")[2].onclick=del;table.appendChild(tr)}}function write(){var allTr=document.getElementsByTagName("tr");var str="";for(var i=1;i<allTr.length-1;i++){str+=allTr[i].children[1].innerHTML+"|$|"}if(allTr.length>1){str+=allTr[allTr.length-1].children[1].innerHTML}localStorage.setItem("CONTENT",str)}band();read();